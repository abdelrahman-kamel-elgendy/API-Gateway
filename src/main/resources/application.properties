# ========================================
# API GATEWAY CONFIGURATION
# ========================================

# --- Server & Application ---
server.port=${SERVER_PORT}
spring.application.name=${APPLICATION_NAME}

# --- Eureka Client ---
eureka.client.service-url.defaultZone=http://${EUREKA_USERNAME}:${EUREKA_PASSWORD}@${EUREKA_INSTANCE_HOSTNAME}:${EUREKA_SERVER_PORT}/eureka/
eureka.client.register-with-eureka=true
eureka.client.fetch-registry=true
eureka.instance.prefer-ip-address=true
eureka.instance.instance-id=${spring.application.name}:${server.port}

# --- Health Check ---
eureka.client.healthcheck.enabled=true
eureka.instance.health-check-url-path=/actuator/health
eureka.instance.status-page-url-path=/actuator/info

# --- Gateway Discovery ---
spring.cloud.gateway.discovery.locator.enabled=${GATEWAY_DISCOVERY_LOCATOR_ENABLED}
spring.cloud.gateway.discovery.locator.lower-case-service-id=${GATEWAY_DISCOVERY_LOCATOR_LOWERCASE_SERVICE_ID}

# --- CORS Configuration ---
spring.cloud.gateway.globalcors.cors-configurations.[/**].allowed-origin-patterns=${GATEWAY_CORS_ALLOWED_ORIGIN_PATTERNS}
spring.cloud.gateway.globalcors.cors-configurations.[/**].allowed-methods=${GATEWAY_CORS_ALLOWED_METHODS}
spring.cloud.gateway.globalcors.cors-configurations.[/**].allowed-headers=${GATEWAY_CORS_ALLOWED_HEADERS}
spring.cloud.gateway.globalcors.cors-configurations.[/**].allow-credentials=${GATEWAY_CORS_ALLOW_CREDENTIALS}
spring.cloud.gateway.globalcors.cors-configurations.[/**].max-age=${GATEWAY_CORS_MAX_AGE}

# --- HTTP Client ---
spring.cloud.gateway.httpclient.connect-timeout=${GATEWAY_HTTPCLIENT_CONNECT_TIMEOUT}
spring.cloud.gateway.httpclient.response-timeout=${GATEWAY_HTTPCLIENT_RESPONSE_TIMEOUT}

# --- Actuator ---
management.endpoints.web.exposure.include=${MANAGEMENT_ENDPOINTS_WEB_EXPOSURE_INCLUDE}
management.endpoint.health.show-details=${MANAGEMENT_ENDPOINT_HEALTH_SHOW_DETAILS}
management.info.env.enabled=true

# --- Logging ---
logging.level.org.springframework.cloud.gateway=${LOGGING_LEVEL_ORG_SPRINGFRAMEWORK_CLOUD_GATEWAY}
logging.level.reactor.netty.http.client=${LOGGING_LEVEL_REACTOR_NETTY_HTTP_CLIENT}
logging.level.com.netflix.discovery=${LOGGING_LEVEL_COM_NETFLIX_DISCOVERY}
